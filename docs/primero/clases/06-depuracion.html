<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.54">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Exploración, depuración y gestión de tablas de datos – Residencia-INE</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="../../site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">

<script src="../../site_libs/htmlwidgets-1.6.4.9000/htmlwidgets.js"></script>

<link href="../../site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">

<script src="../../site_libs/datatables-binding-0.33/datatables.js"></script>

<script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>

<link href="../../site_libs/dt-core-bootstrap4-1.13.6/css/dataTables.bootstrap4.min.css" rel="stylesheet">

<link href="../../site_libs/dt-core-bootstrap4-1.13.6/css/dataTables.bootstrap4.extra.css" rel="stylesheet">

<script src="../../site_libs/dt-core-bootstrap4-1.13.6/js/jquery.dataTables.min.js"></script>

<script src="../../site_libs/dt-core-bootstrap4-1.13.6/js/dataTables.bootstrap4.min.js"></script>

<link href="../../site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">

<script src="../../site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>

<link rel="icon" type="image/x-icon" href="img/favicon.ico">
<link rel="icon" type="image/x-icon" href="favicon.ico">


</head>

<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Residencia-INE</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">1er. año</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Contenidos</h2>
   
  <ul>
  <li><a href="#exploración-y-diagnóstico-de-datos" id="toc-exploración-y-diagnóstico-de-datos" class="nav-link active" data-scroll-target="#exploración-y-diagnóstico-de-datos">Exploración y diagnóstico de datos</a></li>
  <li><a href="#skimr" id="toc-skimr" class="nav-link" data-scroll-target="#skimr">Skimr</a></li>
  <li><a href="#dlookr" id="toc-dlookr" class="nav-link" data-scroll-target="#dlookr">dlookr</a>
  <ul class="collapse">
  <li><a href="#diagnose" id="toc-diagnose" class="nav-link" data-scroll-target="#diagnose">diagnose()</a></li>
  <li><a href="#diagnose_category" id="toc-diagnose_category" class="nav-link" data-scroll-target="#diagnose_category">diagnose_category()</a></li>
  <li><a href="#diagnose_numeric" id="toc-diagnose_numeric" class="nav-link" data-scroll-target="#diagnose_numeric">diagnose_numeric()</a></li>
  </ul></li>
  <li><a href="#diagnose_outlier" id="toc-diagnose_outlier" class="nav-link" data-scroll-target="#diagnose_outlier">diagnose_outlier()</a></li>
  <li><a href="#plot_outlier" id="toc-plot_outlier" class="nav-link" data-scroll-target="#plot_outlier">plot_outlier()</a>
  <ul class="collapse">
  <li><a href="#otras-funciones-del-paquete" id="toc-otras-funciones-del-paquete" class="nav-link" data-scroll-target="#otras-funciones-del-paquete">Otras funciones del paquete</a></li>
  </ul></li>
  <li><a href="#depuración-de-datos" id="toc-depuración-de-datos" class="nav-link" data-scroll-target="#depuración-de-datos">Depuración de datos</a></li>
  <li><a href="#gestión-de-duplicados" id="toc-gestión-de-duplicados" class="nav-link" data-scroll-target="#gestión-de-duplicados">Gestión de duplicados</a>
  <ul class="collapse">
  <li><a href="#eliminación-de-duplicados-por-observaciones-únicas" id="toc-eliminación-de-duplicados-por-observaciones-únicas" class="nav-link" data-scroll-target="#eliminación-de-duplicados-por-observaciones-únicas">Eliminación de duplicados por observaciones únicas</a></li>
  <li><a href="#eliminación-de-duplicados-por-recorte-de-observaciones" id="toc-eliminación-de-duplicados-por-recorte-de-observaciones" class="nav-link" data-scroll-target="#eliminación-de-duplicados-por-recorte-de-observaciones">Eliminación de duplicados por recorte de observaciones</a></li>
  <li><a href="#marcar-duplicados" id="toc-marcar-duplicados" class="nav-link" data-scroll-target="#marcar-duplicados">Marcar duplicados</a></li>
  </ul></li>
  <li><a href="#datos-ordenados" id="toc-datos-ordenados" class="nav-link" data-scroll-target="#datos-ordenados">Datos ordenados</a></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content column-page-right" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><strong>Exploración, depuración y gestión de tablas de datos</strong></h1>
</div>



<div class="quarto-title-meta column-page-right">

    
  
    
  </div>
  


</header>


<p>En el ámbito de los proyectos de análisis de datos, el preprocesamiento, también conocido como preparación de datos, es una etapa crucial que precede al análisis propiamente dicho. Esta fase esencial tiene como objetivo acondicionar los datos para su posterior análisis, garantizando su confiabilidad e integridad.</p>
<p>Las tareas de preprocesamiento son específicas para cada conjunto de datos y dependen de los objetivos del proyecto y las técnicas de análisis que se emplearán. Sin embargo, existen tareas comunes que son aplicables a la mayoría de los casos, entre las que se encuentran el diagnóstico y la limpieza de datos.</p>
<section id="exploración-y-diagnóstico-de-datos" class="level2">
<h2 data-anchor-id="exploración-y-diagnóstico-de-datos">Exploración y diagnóstico de datos</h2>
<p>La etapa de diagnóstico de datos es fundamental para comprender la estructura y características del conjunto de datos que se va a analizar. Esta fase involucra una serie de tareas esenciales, como:</p>
<p><strong>Análisis de la estructura de la tabla de datos</strong>: Esta tarea implica comprender la organización de los datos, identificando las variables, sus tipos de datos y la distribución de los registros. Es relevante vincular este proceso con el “diccionario de datos” de la tabla o base, ya sea de fuente secundaria o creada por nosotros mismos.</p>
<p><strong>Verificación del tipo de dato de cada variable de interés</strong>: Es crucial determinar el tipo de dato de cada variable (numérica, categórica, fecha-hora, etc.) para aplicar las técnicas de análisis adecuadas.</p>
<p><strong>Detección de valores faltantes</strong>: La presencia de valores faltantes puede afectar significativamente los resultados del análisis. Es importante identificar estos valores y determinar la mejor manera de manejarlos (eliminación, imputación, etc.).</p>
<p><strong>Identificación de las categorías de las variables cualitativas</strong>: En el caso de variables categóricas, es necesario identificar las categorías existentes y evaluar su distribución.</p>
<p><strong>Análisis de los mínimos y máximos de valores de cada variable cuantitativa</strong>: Para variables numéricas, es importante determinar los valores mínimos y máximos para detectar posibles valores atípicos o errores de entrada.</p>
<p>Existen diversas herramientas y funciones que facilitan la etapa de diagnóstico de datos. En este curso, se presentarán algunas de las funciones más útiles de paquetes de R.</p>
</section>
<section id="skimr" class="level2">
<h2 data-anchor-id="skimr">Skimr</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/06/skimr.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:10.0%"></p>
</figure>
</div>
<p>Este paquete tiene funciones diseñadas para obtener un resumen rápido de la estructura de tablas de datos y son compatibles con el ecosistema tidyverse.</p>
<p>La función principal del paquete es <code>skim</code> y puede ser aplicada a todo el dataframe o bien a una variable o a un grupo de ellas.</p>
<ul>
<li><p>Proporciona un conjunto más amplio de estadísticas que <code>summary()</code>, incluyendo valores faltantes, completos, número total (n) y desvío estándar (sd).</p></li>
<li><p>Informa de cada tipo de dato por separado.</p></li>
<li><p>Maneja fechas, valores lógicos y otros tipos.</p></li>
</ul>
<p>Trabajemos con <strong>skimr</strong> sobre un conjunto de datos provenientes de la vigilancia del SNVS.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(skimr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">skim</span>(datos)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">datos</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">200</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">56</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">character</td>
<td style="text-align: left;">47</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Date</td>
<td style="text-align: left;">7</td>
</tr>
<tr class="even">
<td style="text-align: left;">logical</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 32%">
<col style="width: 11%">
<col style="width: 16%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 6%">
<col style="width: 10%">
<col style="width: 12%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">min</th>
<th style="text-align: right;">max</th>
<th style="text-align: right;">empty</th>
<th style="text-align: right;">n_unique</th>
<th style="text-align: right;">whitespace</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">SEXO</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">GRUPEDAD</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">18</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PROVINCIA_RESIDENCIA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">18</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">ID_PROV_INDEC_RESIDENCIA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">18</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DEPARTAMENTO_RESIDENCIA</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">0.96</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">26</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">81</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">ID_DEPTO_INDEC_RESIDENCIA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">89</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">LOCALIDAD_RESIDENCIA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">57</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">106</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESTABLECIMIENTO_SALUD</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">82</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">125</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ESTABLECIMIENTO_CARGA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">82</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">117</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">PROVINCIA_CARGA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">17</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DEPTO_CARGA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">22</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">70</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESTAB_CLINICA</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">0.90</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">76</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">112</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DEPTO_CLINICA</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">0.90</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">23</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">73</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">PPL</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SERVICIO_PENITENCIARIO</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">19</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">MOTIVO_CONSULTA</td>
<td style="text-align: right;">181</td>
<td style="text-align: right;">0.09</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">24</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CLASIFICACION_MANUAL</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">67</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">CLASIF_INICIO_TRAT</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">34</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ID_PULMONAR</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">ID_EXTRAPULMONAR</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">31</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">13</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">RESULTADO_RX</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">28</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Bacteriologia</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Baciloscopia</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Cultivo</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">26</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PRUEBA_RESISTENCIA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">RESISTENCIA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Droga</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">26</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Tipo_Resistencia</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ESTABLECIMIENTO_MUESTRA</td>
<td style="text-align: right;">72</td>
<td style="text-align: right;">0.64</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">102</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">73</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">DEPARTAMENTO_MUESTRA</td>
<td style="text-align: right;">72</td>
<td style="text-align: right;">0.64</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">32</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">46</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ESTABLECIMIENTO_DIAG</td>
<td style="text-align: right;">76</td>
<td style="text-align: right;">0.62</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">160</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">62</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">DEPARTAMENTO_DIAG</td>
<td style="text-align: right;">76</td>
<td style="text-align: right;">0.62</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">37</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">39</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Prueba_VIH</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">VIH</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">TRATAMIENTO_ANTIRRETROVIRAL</td>
<td style="text-align: right;">199</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Diag_rapido</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Resultado_diag_rapido</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">62</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">EMBARAZO</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DIABETES</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">CONSUMO_PROB_DROGAS</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ENF_RESP_CRONICA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">COVID</td>
<td style="text-align: right;">199</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SE_DECLARA_PUEBLO_INDIGENA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">TABAQUISMO</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ALCOHOLISMO</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESTAB_TTO</td>
<td style="text-align: right;">35</td>
<td style="text-align: right;">0.82</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">76</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">102</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">RESULTADO_TRATAMIENTO</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">22</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: Date</strong></p>
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 24%">
<col style="width: 11%">
<col style="width: 16%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 10%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: left;">min</th>
<th style="text-align: left;">max</th>
<th style="text-align: left;">median</th>
<th style="text-align: right;">n_unique</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">FECHA_NACIMIENTO</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: left;">1934-12-13</td>
<td style="text-align: left;">2023-05-05</td>
<td style="text-align: left;">1989-07-27</td>
<td style="text-align: right;">198</td>
</tr>
<tr class="even">
<td style="text-align: left;">FECHA_APERTURA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: left;">2021-09-20</td>
<td style="text-align: left;">2024-04-18</td>
<td style="text-align: left;">2023-07-16</td>
<td style="text-align: right;">151</td>
</tr>
<tr class="odd">
<td style="text-align: left;">FECHA_NOTIFICACION</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: left;">2023-01-03</td>
<td style="text-align: left;">2023-12-27</td>
<td style="text-align: left;">2023-07-03</td>
<td style="text-align: right;">147</td>
</tr>
<tr class="even">
<td style="text-align: left;">FIS</td>
<td style="text-align: right;">48</td>
<td style="text-align: right;">0.76</td>
<td style="text-align: left;">2020-12-20</td>
<td style="text-align: left;">2023-12-21</td>
<td style="text-align: left;">2023-05-12</td>
<td style="text-align: right;">116</td>
</tr>
<tr class="odd">
<td style="text-align: left;">FECHA_INICIO_SINTOMA</td>
<td style="text-align: right;">44</td>
<td style="text-align: right;">0.78</td>
<td style="text-align: left;">2022-08-15</td>
<td style="text-align: left;">2023-12-26</td>
<td style="text-align: left;">2023-05-17</td>
<td style="text-align: right;">116</td>
</tr>
<tr class="even">
<td style="text-align: left;">FECHA_INICIO_TRAT</td>
<td style="text-align: right;">43</td>
<td style="text-align: right;">0.78</td>
<td style="text-align: left;">2023-01-03</td>
<td style="text-align: left;">2024-01-08</td>
<td style="text-align: left;">2023-07-02</td>
<td style="text-align: right;">119</td>
</tr>
<tr class="odd">
<td style="text-align: left;">FECHA_FIN_TRAT</td>
<td style="text-align: right;">142</td>
<td style="text-align: right;">0.29</td>
<td style="text-align: left;">2023-03-09</td>
<td style="text-align: left;">2024-04-05</td>
<td style="text-align: left;">2023-10-23</td>
<td style="text-align: right;">52</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: logical</strong></p>
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: left;">count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">ETNIA</td>
<td style="text-align: right;">200</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: left;">:</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 21%">
<col style="width: 12%">
<col style="width: 17%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 3%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 6%">
<col style="width: 7%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">EDAD_DIAGNOSTICO</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">37.02</td>
<td style="text-align: right;">18.63</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">23</td>
<td style="text-align: right;">33</td>
<td style="text-align: right;">49</td>
<td style="text-align: right;">88</td>
<td style="text-align: left;">▂▇▅▃▁</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>La salida completa de <code>skim()</code> separa los resultados por partes. Un resumen de datos inicial, donde vemos la cantidad de filas y columnas con la frecuencia de tipo de variable. Luego le siguen tablas con información descriptiva univariada, donde podemos ver que dependiendo del tipo de variable nos muestra diferentes estadísticos y hasta un mini histograma en el caso de las numéricas.</p>
</section>
<section id="dlookr" class="level2">
<h2 data-anchor-id="dlookr">dlookr</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img//06/dlookr.PNG" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:10.0%"></p>
</figure>
</div>
<p>El paquete se define como una <em>“colección de herramientas que permiten el diagnóstico, la exploración y la transformación de datos”</em>.</p>
<p>El diagnóstico de datos proporciona información y visualización de valores faltantes, valores atípicos y valores únicos y negativos para ayudarle a comprender la distribución y la calidad de sus datos.</p>
<p>Contiene funciones, compatibles con tidyverse, que nos facilitan ver la calidad de nuestros datos, además de otras que tienen por objetivo la exploración y su transformación.</p>
<p>Entre estas funciones encontramos:</p>
<section id="diagnose" class="level3">
<h3 data-anchor-id="diagnose">diagnose()</h3>
<p>Permite diagnosticar variables del dataframe y devuelve como resultado: el tipo de dato de la variable, la cantidad de valores faltantes, su porcentaje, la cantidad de valores únicos y su tasa (valores únicos/observaciones). Lo observamos en forma de tabla interactiva:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dlookr)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">diagnose</span>(datos)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-0d8e3a5d14f657bae598" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-0d8e3a5d14f657bae598">{"x":{"style":"bootstrap4","filter":"none","vertical":false,"fillContainer":false,"autoHideNavigation":true,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56"],["SEXO","FECHA_NACIMIENTO","EDAD_DIAGNOSTICO","GRUPEDAD","PROVINCIA_RESIDENCIA","ID_PROV_INDEC_RESIDENCIA","DEPARTAMENTO_RESIDENCIA","ID_DEPTO_INDEC_RESIDENCIA","LOCALIDAD_RESIDENCIA","ESTABLECIMIENTO_SALUD","ESTABLECIMIENTO_CARGA","PROVINCIA_CARGA","DEPTO_CARGA","ESTAB_CLINICA","DEPTO_CLINICA","PPL","SERVICIO_PENITENCIARIO","FECHA_APERTURA","FECHA_NOTIFICACION","MOTIVO_CONSULTA","CLASIFICACION_MANUAL","CLASIF_INICIO_TRAT","ID_PULMONAR","FIS","ID_EXTRAPULMONAR","FECHA_INICIO_SINTOMA","RESULTADO_RX","Bacteriologia","Baciloscopia","Cultivo","PRUEBA_RESISTENCIA","RESISTENCIA","Droga","Tipo_Resistencia","ESTABLECIMIENTO_MUESTRA","DEPARTAMENTO_MUESTRA","ESTABLECIMIENTO_DIAG","DEPARTAMENTO_DIAG","Prueba_VIH","VIH","TRATAMIENTO_ANTIRRETROVIRAL","Diag_rapido","Resultado_diag_rapido","EMBARAZO","DIABETES","CONSUMO_PROB_DROGAS","ENF_RESP_CRONICA","COVID","SE_DECLARA_PUEBLO_INDIGENA","ETNIA","TABAQUISMO","ALCOHOLISMO","ESTAB_TTO","FECHA_INICIO_TRAT","FECHA_FIN_TRAT","RESULTADO_TRATAMIENTO"],["character","Date","numeric","character","character","character","character","character","character","character","character","character","character","character","character","character","character","Date","Date","character","character","character","character","Date","character","Date","character","character","character","character","character","character","character","character","character","character","character","character","character","character","character","character","character","character","character","character","character","character","character","logical","character","character","character","Date","Date","character"],[0,0,0,0,0,0,9,0,0,0,0,0,0,20,20,0,0,0,0,181,0,0,0,48,0,44,0,0,0,0,0,0,0,0,72,72,76,76,0,0,199,0,0,0,0,0,0,199,0,200,0,0,35,43,142,0],[0,0,0,0,0,0,4.5,0,0,0,0,0,0,10,10,0,0,0,0,90.5,0,0,0,24,0,22,0,0,0,0,0,0,0,0,36,36,38,38,0,0,99.5,0,0,0,0,0,0,99.5,0,100,0,0,17.5,21.5,71,0],[3,198,71,18,18,18,82,89,106,125,117,17,70,113,74,2,7,151,147,4,9,6,3,117,13,117,8,3,6,7,2,4,6,4,74,47,63,40,2,3,2,2,9,3,2,2,2,2,2,1,2,2,103,120,53,7],[0.01,0.99,0.36,0.09,0.09,0.09,0.41,0.44,0.53,0.62,0.58,0.09,0.35,0.5600000000000001,0.37,0.01,0.04,0.76,0.74,0.02,0.04,0.03,0.01,0.58,0.06,0.58,0.04,0.01,0.03,0.04,0.01,0.02,0.03,0.02,0.37,0.23,0.32,0.2,0.01,0.01,0.01,0.01,0.04,0.01,0.01,0.01,0.01,0.01,0.01,0,0.01,0.01,0.52,0.6,0.26,0.04]],"container":"<table class=\"table table-striped table-hover row-border order-column display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>variables<\/th>\n      <th>types<\/th>\n      <th>missing_count<\/th>\n      <th>missing_percent<\/th>\n      <th>unique_count<\/th>\n      <th>unique_rate<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"columnDefs":[{"className":"dt-right","targets":[3,4,5,6]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"variables","targets":1},{"name":"types","targets":2},{"name":"missing_count","targets":3},{"name":"missing_percent","targets":4},{"name":"unique_count","targets":5},{"name":"unique_rate","targets":6}],"order":[],"autoWidth":false,"orderClasses":false},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Al ser compatible con tidyverse se puede editar antes o después de la función, por ejemplo si quisiéramos filtrar variables con valores faltantes (de mayor a menor):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">diagnose</span>(datos) <span class="sc">|&gt;</span> </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">!</span><span class="fu">starts_with</span>(<span class="st">"unique"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(missing_count <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> </span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(missing_count))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16 × 4
   variables                   types     missing_count missing_percent
   &lt;chr&gt;                       &lt;chr&gt;             &lt;int&gt;           &lt;dbl&gt;
 1 ETNIA                       logical             200           100  
 2 TRATAMIENTO_ANTIRRETROVIRAL character           199            99.5
 3 COVID                       character           199            99.5
 4 MOTIVO_CONSULTA             character           181            90.5
 5 FECHA_FIN_TRAT              Date                142            71  
 6 ESTABLECIMIENTO_DIAG        character            76            38  
 7 DEPARTAMENTO_DIAG           character            76            38  
 8 ESTABLECIMIENTO_MUESTRA     character            72            36  
 9 DEPARTAMENTO_MUESTRA        character            72            36  
10 FIS                         Date                 48            24  
11 FECHA_INICIO_SINTOMA        Date                 44            22  
12 FECHA_INICIO_TRAT           Date                 43            21.5
13 ESTAB_TTO                   character            35            17.5
14 ESTAB_CLINICA               character            20            10  
15 DEPTO_CLINICA               character            20            10  
16 DEPARTAMENTO_RESIDENCIA     character             9             4.5</code></pre>
</div>
</div>
</section>
<section id="diagnose_category" class="level3">
<h3 data-anchor-id="diagnose_category">diagnose_category()</h3>
<p>Así como existe <code>diagnose()</code> como una función general, también hay funciones que sirven para el diagnóstico específico por tipo de dato.</p>
<p><code>diagnose_category()</code> lo hace con las variables categóricas, es decir de caracter, de factor y de factor ordenado, mostrando información de cada categoría de cada variable (N, frecuencia, proporción y ranking).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>datos<span class="sc">|&gt;</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">diagnose_category</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-73d2d5204de4737587c1" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-73d2d5204de4737587c1">{"x":{"style":"bootstrap4","filter":"none","vertical":false,"fillContainer":true,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296"],["SEXO","SEXO","SEXO","GRUPEDAD","GRUPEDAD","GRUPEDAD","GRUPEDAD","GRUPEDAD","GRUPEDAD","GRUPEDAD","GRUPEDAD","GRUPEDAD","GRUPEDAD","PROVINCIA_RESIDENCIA","PROVINCIA_RESIDENCIA","PROVINCIA_RESIDENCIA","PROVINCIA_RESIDENCIA","PROVINCIA_RESIDENCIA","PROVINCIA_RESIDENCIA","PROVINCIA_RESIDENCIA","PROVINCIA_RESIDENCIA","PROVINCIA_RESIDENCIA","PROVINCIA_RESIDENCIA","ID_PROV_INDEC_RESIDENCIA","ID_PROV_INDEC_RESIDENCIA","ID_PROV_INDEC_RESIDENCIA","ID_PROV_INDEC_RESIDENCIA","ID_PROV_INDEC_RESIDENCIA","ID_PROV_INDEC_RESIDENCIA","ID_PROV_INDEC_RESIDENCIA","ID_PROV_INDEC_RESIDENCIA","ID_PROV_INDEC_RESIDENCIA","ID_PROV_INDEC_RESIDENCIA","DEPARTAMENTO_RESIDENCIA","DEPARTAMENTO_RESIDENCIA","DEPARTAMENTO_RESIDENCIA","DEPARTAMENTO_RESIDENCIA","DEPARTAMENTO_RESIDENCIA","DEPARTAMENTO_RESIDENCIA","DEPARTAMENTO_RESIDENCIA","DEPARTAMENTO_RESIDENCIA","DEPARTAMENTO_RESIDENCIA","DEPARTAMENTO_RESIDENCIA","ID_DEPTO_INDEC_RESIDENCIA","ID_DEPTO_INDEC_RESIDENCIA","ID_DEPTO_INDEC_RESIDENCIA","ID_DEPTO_INDEC_RESIDENCIA","ID_DEPTO_INDEC_RESIDENCIA","ID_DEPTO_INDEC_RESIDENCIA","ID_DEPTO_INDEC_RESIDENCIA","ID_DEPTO_INDEC_RESIDENCIA","ID_DEPTO_INDEC_RESIDENCIA","ID_DEPTO_INDEC_RESIDENCIA","LOCALIDAD_RESIDENCIA","LOCALIDAD_RESIDENCIA","LOCALIDAD_RESIDENCIA","LOCALIDAD_RESIDENCIA","LOCALIDAD_RESIDENCIA","LOCALIDAD_RESIDENCIA","LOCALIDAD_RESIDENCIA","LOCALIDAD_RESIDENCIA","LOCALIDAD_RESIDENCIA","LOCALIDAD_RESIDENCIA","ESTABLECIMIENTO_SALUD","ESTABLECIMIENTO_SALUD","ESTABLECIMIENTO_SALUD","ESTABLECIMIENTO_SALUD","ESTABLECIMIENTO_SALUD","ESTABLECIMIENTO_SALUD","ESTABLECIMIENTO_SALUD","ESTABLECIMIENTO_SALUD","ESTABLECIMIENTO_SALUD","ESTABLECIMIENTO_SALUD","ESTABLECIMIENTO_CARGA","ESTABLECIMIENTO_CARGA","ESTABLECIMIENTO_CARGA","ESTABLECIMIENTO_CARGA","ESTABLECIMIENTO_CARGA","ESTABLECIMIENTO_CARGA","ESTABLECIMIENTO_CARGA","ESTABLECIMIENTO_CARGA","ESTABLECIMIENTO_CARGA","ESTABLECIMIENTO_CARGA","PROVINCIA_CARGA","PROVINCIA_CARGA","PROVINCIA_CARGA","PROVINCIA_CARGA","PROVINCIA_CARGA","PROVINCIA_CARGA","PROVINCIA_CARGA","PROVINCIA_CARGA","PROVINCIA_CARGA","PROVINCIA_CARGA","DEPTO_CARGA","DEPTO_CARGA","DEPTO_CARGA","DEPTO_CARGA","DEPTO_CARGA","DEPTO_CARGA","DEPTO_CARGA","DEPTO_CARGA","DEPTO_CARGA","DEPTO_CARGA","ESTAB_CLINICA","ESTAB_CLINICA","ESTAB_CLINICA","ESTAB_CLINICA","ESTAB_CLINICA","ESTAB_CLINICA","ESTAB_CLINICA","ESTAB_CLINICA","ESTAB_CLINICA","ESTAB_CLINICA","DEPTO_CLINICA","DEPTO_CLINICA","DEPTO_CLINICA","DEPTO_CLINICA","DEPTO_CLINICA","DEPTO_CLINICA","DEPTO_CLINICA","DEPTO_CLINICA","DEPTO_CLINICA","DEPTO_CLINICA","PPL","PPL","SERVICIO_PENITENCIARIO","SERVICIO_PENITENCIARIO","SERVICIO_PENITENCIARIO","SERVICIO_PENITENCIARIO","SERVICIO_PENITENCIARIO","SERVICIO_PENITENCIARIO","SERVICIO_PENITENCIARIO","MOTIVO_CONSULTA","MOTIVO_CONSULTA","MOTIVO_CONSULTA","MOTIVO_CONSULTA","CLASIFICACION_MANUAL","CLASIFICACION_MANUAL","CLASIFICACION_MANUAL","CLASIFICACION_MANUAL","CLASIFICACION_MANUAL","CLASIFICACION_MANUAL","CLASIFICACION_MANUAL","CLASIFICACION_MANUAL","CLASIFICACION_MANUAL","CLASIF_INICIO_TRAT","CLASIF_INICIO_TRAT","CLASIF_INICIO_TRAT","CLASIF_INICIO_TRAT","CLASIF_INICIO_TRAT","CLASIF_INICIO_TRAT","ID_PULMONAR","ID_PULMONAR","ID_PULMONAR","ID_EXTRAPULMONAR","ID_EXTRAPULMONAR","ID_EXTRAPULMONAR","ID_EXTRAPULMONAR","ID_EXTRAPULMONAR","ID_EXTRAPULMONAR","ID_EXTRAPULMONAR","ID_EXTRAPULMONAR","ID_EXTRAPULMONAR","ID_EXTRAPULMONAR","RESULTADO_RX","RESULTADO_RX","RESULTADO_RX","RESULTADO_RX","RESULTADO_RX","RESULTADO_RX","RESULTADO_RX","RESULTADO_RX","Bacteriologia","Bacteriologia","Bacteriologia","Baciloscopia","Baciloscopia","Baciloscopia","Baciloscopia","Baciloscopia","Baciloscopia","Cultivo","Cultivo","Cultivo","Cultivo","Cultivo","Cultivo","Cultivo","PRUEBA_RESISTENCIA","PRUEBA_RESISTENCIA","RESISTENCIA","RESISTENCIA","RESISTENCIA","RESISTENCIA","Droga","Droga","Droga","Droga","Droga","Droga","Tipo_Resistencia","Tipo_Resistencia","Tipo_Resistencia","Tipo_Resistencia","ESTABLECIMIENTO_MUESTRA","ESTABLECIMIENTO_MUESTRA","ESTABLECIMIENTO_MUESTRA","ESTABLECIMIENTO_MUESTRA","ESTABLECIMIENTO_MUESTRA","ESTABLECIMIENTO_MUESTRA","ESTABLECIMIENTO_MUESTRA","ESTABLECIMIENTO_MUESTRA","ESTABLECIMIENTO_MUESTRA","ESTABLECIMIENTO_MUESTRA","DEPARTAMENTO_MUESTRA","DEPARTAMENTO_MUESTRA","DEPARTAMENTO_MUESTRA","DEPARTAMENTO_MUESTRA","DEPARTAMENTO_MUESTRA","DEPARTAMENTO_MUESTRA","DEPARTAMENTO_MUESTRA","DEPARTAMENTO_MUESTRA","DEPARTAMENTO_MUESTRA","DEPARTAMENTO_MUESTRA","ESTABLECIMIENTO_DIAG","ESTABLECIMIENTO_DIAG","ESTABLECIMIENTO_DIAG","ESTABLECIMIENTO_DIAG","ESTABLECIMIENTO_DIAG","ESTABLECIMIENTO_DIAG","ESTABLECIMIENTO_DIAG","ESTABLECIMIENTO_DIAG","ESTABLECIMIENTO_DIAG","ESTABLECIMIENTO_DIAG","DEPARTAMENTO_DIAG","DEPARTAMENTO_DIAG","DEPARTAMENTO_DIAG","DEPARTAMENTO_DIAG","DEPARTAMENTO_DIAG","DEPARTAMENTO_DIAG","DEPARTAMENTO_DIAG","DEPARTAMENTO_DIAG","DEPARTAMENTO_DIAG","DEPARTAMENTO_DIAG","Prueba_VIH","Prueba_VIH","VIH","VIH","VIH","TRATAMIENTO_ANTIRRETROVIRAL","TRATAMIENTO_ANTIRRETROVIRAL","Diag_rapido","Diag_rapido","Resultado_diag_rapido","Resultado_diag_rapido","Resultado_diag_rapido","Resultado_diag_rapido","Resultado_diag_rapido","Resultado_diag_rapido","Resultado_diag_rapido","Resultado_diag_rapido","Resultado_diag_rapido","EMBARAZO","EMBARAZO","EMBARAZO","DIABETES","DIABETES","CONSUMO_PROB_DROGAS","CONSUMO_PROB_DROGAS","ENF_RESP_CRONICA","ENF_RESP_CRONICA","COVID","COVID","SE_DECLARA_PUEBLO_INDIGENA","SE_DECLARA_PUEBLO_INDIGENA","TABAQUISMO","TABAQUISMO","ALCOHOLISMO","ALCOHOLISMO","ESTAB_TTO","ESTAB_TTO","ESTAB_TTO","ESTAB_TTO","ESTAB_TTO","ESTAB_TTO","ESTAB_TTO","ESTAB_TTO","ESTAB_TTO","ESTAB_TTO","RESULTADO_TRATAMIENTO","RESULTADO_TRATAMIENTO","RESULTADO_TRATAMIENTO","RESULTADO_TRATAMIENTO","RESULTADO_TRATAMIENTO","RESULTADO_TRATAMIENTO","RESULTADO_TRATAMIENTO"],["M","F","A","20-24","30-34","25-29","40-44","45-49","15-19","35-39","55-59","50-54","60-64","Buenos Aires","CABA","Salta","Jujuy","Córdoba","Chaco","Entre Ríos","Santa Fe","Corrientes","Formosa","06","02","66","38","14","22","30","82","18","34","Capital","La Matanza",null,"La Plata","Lomas de Zamora","Moreno","Florencio Varela","San Miguel","Almirante Brown","Comuna 4","06427","06441","06490","06560","NA","06274","06760","14014","02004","06028","*SIN DATO* (*SIN DATO*)","CIUDAD DE BUENOS AIRES","BERAZATEGUI","Desconocido","FLORES","JOSE C. PAZ","LOMAS DE ZAMORA","MORENO","SALTA","SAN MIGUEL","HOSPITAL DE INFECCIOSAS FRANCISCO MUÑIZ","HOSPITAL INTERZONAL DE AGUDOS Y CRONICOS SAN JUAN DE DIOS","INSTITUTO DE TISIONEUMONOLOGIA PROFESOR DR. RAUL VACCAREZZA","SPB - SERV PENITENCIARIO BONAERENSE","HOSPITAL GENERAL MI PUEBLO","HOSPITAL RAWSON","HOSPITAL SAN ROQUE (1)","HOSPITAL SEÑOR DEL MILAGRO","HOSPITAL ZONAL ESPECIALIZADO AGUDOS Y CRONICOS DR. CETRANGOLO","CENTRO DE ATENCION DE ETS","HOSPITAL DE INFECCIOSAS FRANCISCO MUÑIZ","SPB - SERV PENITENCIARIO BONAERENSE","HOSPITAL INTERZONAL DE AGUDOS Y CRONICOS SAN JUAN DE DIOS","HOSPITAL SEÑOR DEL MILAGRO","HOSPITAL ZONAL ESPECIALIZADO AGUDOS Y CRONICOS DR. CETRANGOLO","INSTITUTO DE TISIONEUMONOLOGIA PROFESOR DR. RAUL VACCAREZZA","DIRECCION DE EPIDEMIOLOGIA - MINISTERIO DE SALUD DE ENTRE RIOS","HOSPITAL GENERAL MI PUEBLO","HOSPITAL INTERZONAL GENERAL AGUDOS PRESIDENTE PERON","HOSPITAL RAWSON","Buenos Aires","CABA","Salta","Córdoba","Jujuy","Entre Ríos","Chaco","Santa Fe","Tucumán","Corrientes","Capital","COMUNA 4","La Plata","La Matanza","COMUNA 7","Dr. Manuel Belgrano","San Fernando","Avellaneda","Paraná","Vicente López",null,"HOSPITAL DE INFECCIOSAS FRANCISCO MUÑIZ","INSTITUTO DE TISIONEUMONOLOGIA PROFESOR DR. RAUL VACCAREZZA","SPB - SERV PENITENCIARIO BONAERENSE","HOSPITAL INTERZONAL DE AGUDOS Y CRONICOS SAN JUAN DE DIOS","HOSPITAL GENERAL MI PUEBLO","HOSPITAL RAWSON","HOSPITAL SAN ROQUE (1)","HOSPITAL SEÑOR DEL MILAGRO","CENTRO DE ATENCION DE ETS","COMUNA 4","Capital",null,"La Plata","COMUNA 7","Dr. Manuel Belgrano","La Matanza","Almirante Brown","Florencio Varela","Avellaneda","No","SI","NA","U1 - Lisandro Olmos","U28 - Magdalena","U41 - Campana","U47 - San Isidro","U48 - San Martín","U7 - Azul",null,"Sintomático Respiratorio","Contacto","Examen de Salud","Complejo Mycobacterium tuberculosis","Mycobacterium tuberculosis","Baciloscopía positiva","En estudio","Bacteriología Negativa","Diagnóstico por criterio clínico","M. tuberculosis resistente a Rifampicina (RR)","M. tuberculosis resistente a drogas de 1° linea dif. de Rifampicina","Mycobacterium tuberculosis multirresistente (MR)","Nuevo","Sin Información","Recaída","Otros","Pérdida del seguimiento recuperado","Traslado","SI","NO","Sin información","No registra","Pleural","Meningea","Otras","Sin información de localización","Ganglionar","Gastrointestinal","Peritoneal","Derrame pleural","Diseminada","Sin información","BCC (bilateral con cavidad)","UCC (unilateral con cavidad)","USC (unilateral sin cavidad)","BSC (bilateral sin cavidad)","Derrame pleural","Sin lesiones","TB miliar","Positiva","Sin información","Negativa","Sin información","Positivo","Positivo (+++)","Negativo","Positivo (+)","Positivo (++)","Sin información","Positivo","Positivo (+++)","Positivo (+)","Positivo (++)","Positivo (1 a 19 colonias)","Negativo","Sin información","SI","Sin información","Resistencia no detectada","Resistencia detectada","Resistencia indeterminada","NA","Sin información","Isoniacida","Isoniacida, Estreptomicina","Isoniacida, Etionamida","Rifampicina","NA","Resistente","RR","MDR",null,"HOSPITAL DE INFECCIOSAS FRANCISCO MUÑIZ","HOSPITAL ZONAL ESPECIALIZADO AGUDOS Y CRONICOS DR. CETRANGOLO","HOSPITAL INTERZONAL DE AGUDOS Y CRONICOS SAN JUAN DE DIOS","HOSPITAL INTERZONAL GENERAL AGUDOS PRESIDENTE PERON","HOSPITAL SEÑOR DEL MILAGRO","HOSPITAL DE CLINICAS JOSE DE SAN MARTIN","HOSPITAL GENERAL DE AGUDOS P. PIÑERO","HOSPITAL SAN ROQUE (1)","HOSPITAL TRANSITO CACERES DE ALLENDE",null,"COMUNA 4","Capital","La Plata","Vicente López","Avellaneda","Dr. Manuel Belgrano","San Fernando","Almirante Brown","La Matanza",null,"HOSPITAL DE INFECCIOSAS FRANCISCO MUÑIZ","HOSPITAL INTERZONAL GENERAL AGUDOS PRESIDENTE PERON","HOSPITAL ZONAL ESPECIALIZADO AGUDOS Y CRONICOS DR. CETRANGOLO","HOSPITAL INTERZONAL DE AGUDOS Y CRONICOS SAN JUAN DE DIOS","HOSPITAL SEÑOR DEL MILAGRO","CENTRO REGIONAL DE ESTUDIOS BIOQUIMICOS DE LA TUBERCULOSIS- CREBIOT","HOSPITAL GENERAL DE AGUDOS P. PIÑERO","HOSPITAL INTERZONAL GENERAL VICENTE LOPEZ Y PLANES","HOSPITAL ZONAL GENERAL DE AGUDOS DR. ALBERTO EDGARDO BALESTRINI",null,"COMUNA 4","Capital","La Plata","Avellaneda","Vicente López","La Matanza","San Fernando","Rosario","COMUNA 7","Sin información","Si","Sin información","Negativo","Positivo",null,"SI","No","Si","Sin información","MTB detectado  alto, resistencia a rifampicina no detectada","MTB detectado medio, resistencia a rifampicina no detectada","MTB detectado bajo, resistencia a rifampicina no detectada","MTB no detectado","MTB detectado (trazas), resistencia a rifampcina indeterminada","MTB detectado muy bajo, resistencia a rifampicina no detectada","MTB detectado muy bajo, resistencia a rifampicina detectada","Xpert: CMTB detectado, resistencia a R detectada","Sin información","NO","NS","No","Sí","Sin Información","SI","Sin Información","SI",null,"SI","Sin Información","NO","Sin Información","SI","Sin Información","SI",null,"HOSPITAL DE INFECCIOSAS FRANCISCO MUÑIZ","SPB - SERV PENITENCIARIO BONAERENSE","HOSPITAL INTERZONAL DE AGUDOS Y CRONICOS SAN JUAN DE DIOS","INSTITUTO DE TISIONEUMONOLOGIA PROFESOR DR. RAUL VACCAREZZA","HOSPITAL RAWSON","HOSPITAL SAN ROQUE (1)","HOSPITAL SEÑOR DEL MILAGRO","CENTRO DE ATENCION DE ETS","CESAC Nº 20","En tratamiento","Tratamiento completo","Sin informacion","Fallecido","Pérdida de seguimiento","Curado","Traslado"],[200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200],[131,68,1,26,26,23,16,16,15,15,11,8,8,111,19,10,9,8,7,7,5,4,4,111,19,10,9,8,7,7,5,4,4,16,10,9,7,7,7,6,6,5,5,10,7,7,7,7,6,6,6,5,5,36,7,4,4,4,4,4,4,4,4,14,6,6,6,4,4,4,4,4,3,15,6,5,5,5,5,4,4,4,4,92,42,10,9,9,7,6,5,4,3,27,25,15,7,6,6,6,5,5,5,20,12,6,6,5,4,4,4,4,3,23,22,20,13,6,5,5,4,4,3,193,7,193,2,1,1,1,1,1,181,16,2,1,61,45,44,27,11,9,1,1,1,141,37,10,7,3,2,172,15,13,164,15,4,3,3,2,2,2,1,1,87,44,24,19,17,4,3,2,167,19,14,61,46,27,22,22,22,109,41,16,13,8,7,6,112,88,112,78,6,4,194,2,1,1,1,1,194,3,2,1,72,14,10,5,5,4,3,3,3,3,72,16,16,10,10,6,5,5,4,4,76,15,10,10,7,7,3,3,3,3,76,19,15,12,10,10,5,5,4,3,149,51,149,41,10,199,1,150,50,150,12,10,9,7,6,4,1,1,137,45,18,185,15,194,6,197,3,199,1,147,53,192,8,193,7,35,13,6,5,5,4,4,4,3,3,92,41,34,12,10,9,2],[65.5,34,0.5,13,13,11.5,8,8,7.5,7.5,5.5,4,4,55.5,9.5,5,4.5,4,3.5,3.5,2.5,2,2,55.5,9.5,5,4.5,4,3.5,3.5,2.5,2,2,8,5,4.5,3.5,3.5,3.5,3,3,2.5,2.5,5,3.5,3.5,3.5,3.5,3,3,3,2.5,2.5,18,3.5,2,2,2,2,2,2,2,2,7,3,3,3,2,2,2,2,2,1.5,7.5,3,2.5,2.5,2.5,2.5,2,2,2,2,46,21,5,4.5,4.5,3.5,3,2.5,2,1.5,13.5,12.5,7.5,3.5,3,3,3,2.5,2.5,2.5,10,6,3,3,2.5,2,2,2,2,1.5,11.5,11,10,6.5,3,2.5,2.5,2,2,1.5,96.5,3.5,96.5,1,0.5,0.5,0.5,0.5,0.5,90.5,8,1,0.5,30.5,22.5,22,13.5,5.5,4.5,0.5,0.5,0.5,70.5,18.5,5,3.5,1.5,1,86,7.5,6.5,82,7.5,2,1.5,1.5,1,1,1,0.5,0.5,43.5,22,12,9.5,8.5,2,1.5,1,83.5,9.5,7,30.5,23,13.5,11,11,11,54.5,20.5,8,6.5,4,3.5,3,56,44,56,39,3,2,97,1,0.5,0.5,0.5,0.5,97,1.5,1,0.5,36,7,5,2.5,2.5,2,1.5,1.5,1.5,1.5,36,8,8,5,5,3,2.5,2.5,2,2,38,7.5,5,5,3.5,3.5,1.5,1.5,1.5,1.5,38,9.5,7.5,6,5,5,2.5,2.5,2,1.5,74.5,25.5,74.5,20.5,5,99.5,0.5,75,25,75,6,5,4.5,3.5,3,2,0.5,0.5,68.5,22.5,9,92.5,7.5,97,3,98.5,1.5,99.5,0.5,73.5,26.5,96,4,96.5,3.5,17.5,6.5,3,2.5,2.5,2,2,2,1.5,1.5,46,20.5,17,6,5,4.5,1],[1,2,3,1,1,3,4,4,6,6,8,9,9,1,2,3,4,5,6,6,8,9,9,1,2,3,4,5,6,6,8,9,9,1,2,3,4,4,4,7,7,9,9,1,2,2,2,2,6,6,6,9,9,1,2,3,3,3,3,3,3,3,3,1,2,2,2,5,5,5,5,5,10,1,2,3,3,3,3,7,7,7,7,1,2,3,4,4,6,7,8,9,10,1,2,3,4,5,5,5,8,8,8,1,2,3,3,5,6,6,6,6,10,1,2,3,4,5,6,6,8,8,10,1,2,1,2,3,3,3,3,3,1,2,3,4,1,2,3,4,5,6,7,7,7,1,2,3,4,5,6,1,2,3,1,2,3,4,4,6,6,6,9,9,1,2,3,4,5,6,7,8,1,2,3,1,2,3,4,4,4,1,2,3,4,5,6,7,1,2,1,2,3,4,1,2,3,3,3,3,1,2,3,4,1,2,3,4,4,6,7,7,7,7,1,2,2,4,4,6,7,7,9,9,1,2,3,3,5,5,7,7,7,7,1,2,3,4,5,5,7,7,9,10,1,2,1,2,3,1,2,1,2,1,2,3,4,5,6,7,8,8,1,2,3,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,3,4,4,6,6,6,9,9,1,2,3,4,5,6,7]],"container":"<table class=\"table table-striped table-hover row-border order-column display fill-container\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>variables<\/th>\n      <th>levels<\/th>\n      <th>N<\/th>\n      <th>freq<\/th>\n      <th>ratio<\/th>\n      <th>rank<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"columnDefs":[{"className":"dt-right","targets":[3,4,5,6]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"variables","targets":1},{"name":"levels","targets":2},{"name":"N","targets":3},{"name":"freq","targets":4},{"name":"ratio","targets":5},{"name":"rank","targets":6}],"order":[],"autoWidth":false,"orderClasses":false},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="diagnose_numeric" class="level3">
<h3 data-anchor-id="diagnose_numeric">diagnose_numeric()</h3>
<p>Para variables numéricas tenemos a <code>diagnose_numeric()</code> que nos brinda estadísticos resumen descriptivos univariados.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>datos<span class="sc">|&gt;</span> </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">diagnose_numeric</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-16f56593e741c632c0f8" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-16f56593e741c632c0f8">{"x":{"style":"bootstrap4","filter":"none","vertical":false,"fillContainer":false,"autoHideNavigation":true,"data":[["1"],["EDAD_DIAGNOSTICO"],[0],[23],[37.02],[33],[49],[88],[3],[0],[0]],"container":"<table class=\"table table-striped table-hover row-border order-column display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>variables<\/th>\n      <th>min<\/th>\n      <th>Q1<\/th>\n      <th>mean<\/th>\n      <th>median<\/th>\n      <th>Q3<\/th>\n      <th>max<\/th>\n      <th>zero<\/th>\n      <th>minus<\/th>\n      <th>outlier<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"columnDefs":[{"className":"dt-right","targets":[2,3,4,5,6,7,8,9,10]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"variables","targets":1},{"name":"min","targets":2},{"name":"Q1","targets":3},{"name":"mean","targets":4},{"name":"median","targets":5},{"name":"Q3","targets":6},{"name":"max","targets":7},{"name":"zero","targets":8},{"name":"minus","targets":9},{"name":"outlier","targets":10}],"order":[],"autoWidth":false,"orderClasses":false},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Observamos que sobre la única variable numérica de datos nos calcula el mínimo, primer cuartil, media, mediana, tercer cuartil, máximo, la cantidad de ceros, la cantidad de números negativos y la cantidad de datos atípicos.</p>
</section>
</section>
<section id="diagnose_outlier" class="level2">
<h2 data-anchor-id="diagnose_outlier">diagnose_outlier()</h2>
<p>Sobre los datos atípicos <code>diagnose_outlier()</code> nos amplía la información:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>datos<span class="sc">|&gt;</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">diagnose_outlier</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-0014d9995fe9aa05ba15" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-0014d9995fe9aa05ba15">{"x":{"style":"bootstrap4","filter":"none","vertical":false,"fillContainer":false,"autoHideNavigation":true,"data":[["1"],["EDAD_DIAGNOSTICO"],[0],[0],[null],[37.02],[37.02]],"container":"<table class=\"table table-striped table-hover row-border order-column display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>variables<\/th>\n      <th>outliers_cnt<\/th>\n      <th>outliers_ratio<\/th>\n      <th>outliers_mean<\/th>\n      <th>with_mean<\/th>\n      <th>without_mean<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"columnDefs":[{"className":"dt-right","targets":[2,3,4,5,6]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"variables","targets":1},{"name":"outliers_cnt","targets":2},{"name":"outliers_ratio","targets":3},{"name":"outliers_mean","targets":4},{"name":"with_mean","targets":5},{"name":"without_mean","targets":6}],"order":[],"autoWidth":false,"orderClasses":false},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Aquí la variable EDAD_DIAGNOSTICO no tiene datos atípicos por lo que el conteo y proporción es de cero, la media de los outlier no existe y la media contando y no contando estos outlier da lo mismo (37,02)</p>
</section>
<section id="plot_outlier" class="level2">
<h2 data-anchor-id="plot_outlier">plot_outlier()</h2>
<p>Agreguemos algún dato atípico a EDAD_DIAGNOSTICO para poder mostrar este gráfico.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>datos[<span class="dv">10</span>, <span class="st">"EDAD_DIAGNOSTICO"</span>] <span class="ot">&lt;-</span> <span class="dv">105</span>  <span class="co"># cambiamos la edad de la observación 10 </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>datos <span class="sc">|&gt;</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_outlier</span>(EDAD_DIAGNOSTICO) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06-depuracion_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" style="width:120.0%"></p>
</figure>
</div>
</div>
</div>
<p>El gráfico siempre se va a producir si al menos tenemos un dato atípico en la variable. Grafica un boxplot e histograma contando los valores outlier que la variable tenga y otro quitándolos.</p>
<section id="otras-funciones-del-paquete" class="level3">
<h3 data-anchor-id="otras-funciones-del-paquete">Otras funciones del paquete</h3>
<p><strong>dlookr</strong> tiene muchas otras funciones, como <code>find_na()</code> y <code>plot_pareto_na()</code> vistas en el documento sobre datos faltantes, o de análisis descriptivo más completo que mostraremos más adelante.</p>
<p>También hay algunas que tienen como objetivo la conversión de datos y/o la imputación de datos ausentes, que no trabajaremos en el curso pero pueden encontrarse en el sitio del desarrollador <a href="https://choonghyunryu.github.io/dlookr/index.html" class="uri">https://choonghyunryu.github.io/dlookr/index.html</a></p>
</section>
</section>
<section id="depuración-de-datos" class="level2">
<h2 data-anchor-id="depuración-de-datos">Depuración de datos</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/06/datacleaning.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:40.0%"></p>
</figure>
</div>
<p>Una vez finalizado el diagnóstico de datos, se procede a la etapa de depuración, donde se corrigen los errores identificados y se prepara el conjunto de datos para su análisis. La depuración involucra técnicas como la eliminación de valores faltantes, la corrección de errores de entrada, la transformación de variables y el manejo de valores atípicos.</p>
<p>Un flujo de trabajo modelo partiendo de datos crudos y terminando en datos limpios es el siguiente:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/06/flujo.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:60.0%"></p>
</figure>
</div>
<p>Durante este proceso puede haber múltiples situaciones dependiendo de la calidad original de los datos crudos, desde carecer de encabezados o contener tipos de datos incorrectos, pasando por tener que corregir etiquetas de categorías incorrectas, etc.</p>
<p>Las herramientas de <strong>dplyr</strong> en tidyverse nos van a facilitar esta tarea que suele ocupar entre un 70 y 80% del tiempo de trabajo cuando analizamos datos.</p>
</section>
<section id="gestión-de-duplicados" class="level2">
<h2 data-anchor-id="gestión-de-duplicados">Gestión de duplicados</h2>
<p>Un caso habitual con el que debemos lidiar es el tener observaciones duplicadas, total o parcialmente. Por este motivo, debemos conocer las características de la o las tablas con las que estamos trabajando, es decir, si las observaciones tiene claves unívocas, si estas observaciones se pueden repetir, si la relación es uno a uno o uno a varios cuando hay más de una tabla relacionada, etc.</p>
<p>Entonces, el primer paso será asegurarnos que los datos cumplen con el criterio que conocemos haciendo una detección de observaciones y/o partes de observaciones (variables clave) que se encuentran duplicadas.</p>
<p>Luego, hay diferentes tareas que se pueden realizar para gestionar estos datos duplicados, cuando su existencia no es la esperada:</p>
<ul>
<li><p>Eliminación de duplicados a partir de observaciones únicas.</p></li>
<li><p>Recortar tabla de datos para eliminar duplicados</p></li>
<li><p>Marcar duplicados (conservando duplicados en la tabla)</p></li>
</ul>
<p>La función <code>get_dupes()</code> del paquete <strong>janitor</strong> es muy útil porque identifica estas repeticiones.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>datos <span class="sc">|&gt;</span> </span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_dupes</span>(<span class="fu">everything</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 57
# ℹ 57 variables: SEXO &lt;chr&gt;, FECHA_NACIMIENTO &lt;date&gt;, EDAD_DIAGNOSTICO &lt;dbl&gt;,
#   GRUPEDAD &lt;chr&gt;, PROVINCIA_RESIDENCIA &lt;chr&gt;, ID_PROV_INDEC_RESIDENCIA &lt;chr&gt;,
#   DEPARTAMENTO_RESIDENCIA &lt;chr&gt;, ID_DEPTO_INDEC_RESIDENCIA &lt;chr&gt;,
#   LOCALIDAD_RESIDENCIA &lt;chr&gt;, ESTABLECIMIENTO_SALUD &lt;chr&gt;,
#   ESTABLECIMIENTO_CARGA &lt;chr&gt;, PROVINCIA_CARGA &lt;chr&gt;, DEPTO_CARGA &lt;chr&gt;,
#   ESTAB_CLINICA &lt;chr&gt;, DEPTO_CLINICA &lt;chr&gt;, PPL &lt;chr&gt;,
#   SERVICIO_PENITENCIARIO &lt;chr&gt;, FECHA_APERTURA &lt;date&gt;, …</code></pre>
</div>
</div>
<p>Aplicada sobre el dataframe entero detecta aquellas observaciones que sean iguales en todas sus observaciones. Esto es difícil que pase pero puede suceder cuando por alguna falla técnica el sistema desde donde se obtienen los datos duplica registros completos.</p>
<p>Otra posibilidad es utilizar la variable que es clave en la tabla de datos o las variables que constituyen una clave combinada.</p>
<p>Por ejemplo, en este caso, usemos una serie de variables como SEXO, FECHA_NACIMIENTO, ID_PROV_INDEC_RESIDENCIA e ID_DEPTO_INDEC_RESIDENCIA para ver si hay observaciones donde estos datos se repitan.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>datos <span class="sc">|&gt;</span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_dupes</span>(SEXO, FECHA_NACIMIENTO, </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>            ID_PROV_INDEC_RESIDENCIA, ID_DEPTO_INDEC_RESIDENCIA)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 57
  SEXO  FECHA_NACIMIENTO ID_PROV_INDEC_RESIDENCIA ID_DEPTO_INDEC_RESIDENCIA
  &lt;chr&gt; &lt;date&gt;           &lt;chr&gt;                    &lt;chr&gt;                    
1 M     1947-06-29       90                       90063                    
2 M     1947-06-29       90                       90063                    
# ℹ 53 more variables: dupe_count &lt;int&gt;, EDAD_DIAGNOSTICO &lt;dbl&gt;,
#   GRUPEDAD &lt;chr&gt;, PROVINCIA_RESIDENCIA &lt;chr&gt;, DEPARTAMENTO_RESIDENCIA &lt;chr&gt;,
#   LOCALIDAD_RESIDENCIA &lt;chr&gt;, ESTABLECIMIENTO_SALUD &lt;chr&gt;,
#   ESTABLECIMIENTO_CARGA &lt;chr&gt;, PROVINCIA_CARGA &lt;chr&gt;, DEPTO_CARGA &lt;chr&gt;,
#   ESTAB_CLINICA &lt;chr&gt;, DEPTO_CLINICA &lt;chr&gt;, PPL &lt;chr&gt;,
#   SERVICIO_PENITENCIARIO &lt;chr&gt;, FECHA_APERTURA &lt;date&gt;,
#   FECHA_NOTIFICACION &lt;date&gt;, MOTIVO_CONSULTA &lt;chr&gt;, …</code></pre>
</div>
</div>
<p>Encontramos dos observaciones que tienen los mismo valores en esta combinación de variables. Un hombre nacido el 29/06/1947 en la provincia de Tucumán, en el departamento Lules.</p>
<p>Supongamos que no puede existir dos veces la misma persona en la tabla y que, además para confirmar esto tenemos alguna variable más segura como el DNI, por ejemplo.</p>
<section id="eliminación-de-duplicados-por-observaciones-únicas" class="level3">
<h3 data-anchor-id="eliminación-de-duplicados-por-observaciones-únicas">Eliminación de duplicados por observaciones únicas</h3>
<p>Para eliminar filas duplicadas en una tabla de datos podemos utilizar la función <code>distinct()</code> de <strong>dplyr</strong>.</p>
<p>La función tiene un argumento denominado <code>.keep_all</code> que permite valores <em>TRUE</em> o <em>FALSE</em>. Si se iguala a <em>TRUE</em> se mantienen en el resultado todas las variables que son parte de la tabla, aunque estas no estén declaradas dentro del <code>distinct()</code>.</p>
<p>Por defecto, este argumento se encuentra igualado a <em>FALSE</em>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(datos)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 200</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>datos <span class="sc">|&gt;</span> </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(SEXO, FECHA_NACIMIENTO, ID_PROV_INDEC_RESIDENCIA, </span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>           ID_DEPTO_INDEC_RESIDENCIA, </span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">.keep_all =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 199 × 56
   SEXO  FECHA_NACIMIENTO EDAD_DIAGNOSTICO GRUPEDAD PROVINCIA_RESIDENCIA
   &lt;chr&gt; &lt;date&gt;                      &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;               
 1 M     1948-06-22                     74 70-74    Tierra del Fuego    
 2 F     1981-06-20                     41 40-44    Buenos Aires        
 3 F     1989-03-30                     33 30-34    Buenos Aires        
 4 M     2006-11-17                     16 15-19    Chaco               
 5 M     1993-06-02                     29 25-29    Jujuy               
 6 M     1989-04-08                     33 30-34    Buenos Aires        
 7 F     1977-07-30                     45 45-49    Buenos Aires        
 8 M     1968-04-09                     54 50-54    Misiones            
 9 F     2008-01-10                     15 15-19    Chaco               
10 M     1987-11-27                    105 35-39    Buenos Aires        
# ℹ 189 more rows
# ℹ 51 more variables: ID_PROV_INDEC_RESIDENCIA &lt;chr&gt;,
#   DEPARTAMENTO_RESIDENCIA &lt;chr&gt;, ID_DEPTO_INDEC_RESIDENCIA &lt;chr&gt;,
#   LOCALIDAD_RESIDENCIA &lt;chr&gt;, ESTABLECIMIENTO_SALUD &lt;chr&gt;,
#   ESTABLECIMIENTO_CARGA &lt;chr&gt;, PROVINCIA_CARGA &lt;chr&gt;, DEPTO_CARGA &lt;chr&gt;,
#   ESTAB_CLINICA &lt;chr&gt;, DEPTO_CLINICA &lt;chr&gt;, PPL &lt;chr&gt;,
#   SERVICIO_PENITENCIARIO &lt;chr&gt;, FECHA_APERTURA &lt;date&gt;, …</code></pre>
</div>
</div>
<p>Observamos que las 200 observaciones <code>distinct()</code> nos devuelve 199. Eliminó una de las dos que tenían duplicadas esa serie de variables definidas, pero no podemos controlar cuál de ellas elimina.</p>
</section>
<section id="eliminación-de-duplicados-por-recorte-de-observaciones" class="level3">
<h3 data-anchor-id="eliminación-de-duplicados-por-recorte-de-observaciones">Eliminación de duplicados por recorte de observaciones</h3>
<p>Recortar es similar a filtrar, la diferencia está en que se filtra por condiciones y recortamos por posiciones.</p>
<p>La familia de funciones de <strong>dplyr</strong> que se puede utilizar para recortar es <code>slice_*()</code>.</p>
<p>Estas funciones pueden ser muy útiles si se aplican a un dataframe agrupado porque la operación de recorte se realiza en cada grupo por separado.</p>
<p>Por ejemplo, podemos usar la FECHA_NOTIFICACION para seleccionar la mas vieja. Esto se hace combinado <code>group_by()</code> y <code>slice_min()</code> (observación con el valor mínimo)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>datos <span class="sc">|&gt;</span> </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_dupes</span>(SEXO, FECHA_NACIMIENTO, </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>             ID_PROV_INDEC_RESIDENCIA, ID_DEPTO_INDEC_RESIDENCIA) <span class="sc">|&gt;</span> </span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(SEXO, FECHA_NACIMIENTO, FECHA_NOTIFICACION)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  SEXO  FECHA_NACIMIENTO FECHA_NOTIFICACION
  &lt;chr&gt; &lt;date&gt;           &lt;date&gt;            
1 M     1947-06-29       2023-03-10        
2 M     1947-06-29       2023-02-24        </code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>datos <span class="sc">|&gt;</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(SEXO, FECHA_NACIMIENTO, </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>           ID_PROV_INDEC_RESIDENCIA, ID_DEPTO_INDEC_RESIDENCIA) <span class="sc">|&gt;</span> </span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_min</span>(FECHA_NOTIFICACION) <span class="sc">|&gt;</span> </span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(SEXO <span class="sc">==</span> <span class="st">"M"</span>, FECHA_NACIMIENTO <span class="sc">==</span> <span class="fu">dmy</span>(<span class="st">"29/06/1947"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(SEXO, FECHA_NACIMIENTO, FECHA_NOTIFICACION) <span class="sc">|&gt;</span> </span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Adding missing grouping variables: `ID_PROV_INDEC_RESIDENCIA`,
`ID_DEPTO_INDEC_RESIDENCIA`</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 5
  ID_PROV_INDEC_RESIDENCIA ID_DEPTO_INDEC_RESIDENCIA SEXO  FECHA_NACIMIENTO
  &lt;chr&gt;                    &lt;chr&gt;                     &lt;chr&gt; &lt;date&gt;          
1 90                       90063                     M     1947-06-29      
# ℹ 1 more variable: FECHA_NOTIFICACION &lt;date&gt;</code></pre>
</div>
</div>
</section>
<section id="marcar-duplicados" class="level3">
<h3 data-anchor-id="marcar-duplicados">Marcar duplicados</h3>
<p>Si, en cambio, lo que buscamos es mantener a todas las observaciones de la tabla pero marcar aquellos que consideramos duplicados podemos hacer:</p>
<ol type="1">
<li><p>Recortar el dataframe original a sólo las filas para el análisis. Guardar los ID de este dataframe reducido en un vector.</p></li>
<li><p>En el dataframe original, creamos una variable de marca usando una función condicional, basándonos si el ID está presente en el dataframe reducido (vector de ID anterior).</p></li>
</ol>
<p>Primer paso, en esta tabla no existe un ID único por lo que vamos a crear una clave subrogada.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>datos <span class="ot">&lt;-</span> datos <span class="sc">|&gt;</span> </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ID =</span> <span class="fu">row_number</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Ahora usaremos este ID para crear un vector con los números de las dos observaciones anteriores que están duplicadas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>ID_duplicados <span class="ot">&lt;-</span> datos <span class="sc">|&gt;</span> </span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_dupes</span>(SEXO, FECHA_NACIMIENTO, </span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>             ID_PROV_INDEC_RESIDENCIA, ID_DEPTO_INDEC_RESIDENCIA) <span class="sc">|&gt;</span> </span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(ID)</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>ID_duplicados</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  44 166</code></pre>
</div>
</div>
<p>Finalmente aplicamos este vector con una función como <code>if_else()</code> para marcar con una <strong>X</strong> en la variable duplicado.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>datos <span class="ot">&lt;-</span> datos <span class="sc">|&gt;</span> </span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">duplicado =</span> <span class="fu">if_else</span>(ID <span class="sc">%in%</span> ID_duplicados, <span class="st">"X"</span>, <span class="cn">NA</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Luego podriamos filtrar los duplicados directamente</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>datos <span class="sc">|&gt;</span> </span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(duplicado <span class="sc">==</span> <span class="st">"X"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 58
  SEXO  FECHA_NACIMIENTO EDAD_DIAGNOSTICO GRUPEDAD PROVINCIA_RESIDENCIA
  &lt;chr&gt; &lt;date&gt;                      &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;               
1 M     1947-06-29                     75 75-79    Tucumán             
2 M     1947-06-29                     75 75-79    Tucumán             
# ℹ 53 more variables: ID_PROV_INDEC_RESIDENCIA &lt;chr&gt;,
#   DEPARTAMENTO_RESIDENCIA &lt;chr&gt;, ID_DEPTO_INDEC_RESIDENCIA &lt;chr&gt;,
#   LOCALIDAD_RESIDENCIA &lt;chr&gt;, ESTABLECIMIENTO_SALUD &lt;chr&gt;,
#   ESTABLECIMIENTO_CARGA &lt;chr&gt;, PROVINCIA_CARGA &lt;chr&gt;, DEPTO_CARGA &lt;chr&gt;,
#   ESTAB_CLINICA &lt;chr&gt;, DEPTO_CLINICA &lt;chr&gt;, PPL &lt;chr&gt;,
#   SERVICIO_PENITENCIARIO &lt;chr&gt;, FECHA_APERTURA &lt;date&gt;,
#   FECHA_NOTIFICACION &lt;date&gt;, MOTIVO_CONSULTA &lt;chr&gt;, …</code></pre>
</div>
</div>
</section>
</section>
<section id="datos-ordenados" class="level2">
<h2 data-anchor-id="datos-ordenados">Datos ordenados</h2>
<p>Las tablas de datos con la que trabajamos dentro de tidyverse deben cumplir con ciertas características de los “datos ordenados” (tidy data).</p>
<p>Llamamos <strong>tidy data</strong> cuando:</p>
<ul>
<li>Cada variable está en una columna</li>
<li>Cada observación está en una fila</li>
<li>Cada celda del cruce entre una columna y una fila es un valor</li>
<li>Cada tabla pertenece a una unidad de observación</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/06/tidy_data.PNG" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:60.0%"></p>
</figure>
</div>
<p>A veces las tablas se parecen a esto:</p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">country</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2010</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2011</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2012</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2013</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Argentina</td>
<td style="text-align: right;">40374224</td>
<td style="text-align: right;">40728738</td>
<td style="text-align: right;">41086927</td>
<td style="text-align: right;">41446246</td>
</tr>
<tr class="even">
<td style="text-align: left;">Brazil</td>
<td style="text-align: right;">195210154</td>
<td style="text-align: right;">196935134</td>
<td style="text-align: right;">198656019</td>
<td style="text-align: right;">200361925</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Uruguay</td>
<td style="text-align: right;">3371982</td>
<td style="text-align: right;">3383486</td>
<td style="text-align: right;">3395253</td>
<td style="text-align: right;">3407062</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>Cumple con las reglas de “datos ordenados”?</p>
<p>No.&nbsp;</p>
<p>No lo hace porque lo que vemos como cabecera de columnas en 2010, 2011, etc. son categorías de la variable año (<strong>year</strong>) y no nombres de variables.</p>
<p>En cambio esta tabla, aunque tenga la misma información, si cumple con el formato ordenado.</p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">country</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">year</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">population</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Argentina</td>
<td style="text-align: right;">2010</td>
<td style="text-align: right;">40374224</td>
</tr>
<tr class="even">
<td style="text-align: left;">Argentina</td>
<td style="text-align: right;">2011</td>
<td style="text-align: right;">40728738</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Argentina</td>
<td style="text-align: right;">2012</td>
<td style="text-align: right;">41086927</td>
</tr>
<tr class="even">
<td style="text-align: left;">Argentina</td>
<td style="text-align: right;">2013</td>
<td style="text-align: right;">41446246</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Brazil</td>
<td style="text-align: right;">2010</td>
<td style="text-align: right;">195210154</td>
</tr>
<tr class="even">
<td style="text-align: left;">Brazil</td>
<td style="text-align: right;">2011</td>
<td style="text-align: right;">196935134</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Brazil</td>
<td style="text-align: right;">2012</td>
<td style="text-align: right;">198656019</td>
</tr>
<tr class="even">
<td style="text-align: left;">Brazil</td>
<td style="text-align: right;">2013</td>
<td style="text-align: right;">200361925</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Uruguay</td>
<td style="text-align: right;">2010</td>
<td style="text-align: right;">3371982</td>
</tr>
<tr class="even">
<td style="text-align: left;">Uruguay</td>
<td style="text-align: right;">2011</td>
<td style="text-align: right;">3383486</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Uruguay</td>
<td style="text-align: right;">2012</td>
<td style="text-align: right;">3395253</td>
</tr>
<tr class="even">
<td style="text-align: left;">Uruguay</td>
<td style="text-align: right;">2013</td>
<td style="text-align: right;">3407062</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>Generalmente los problemas comunes en tabla “desordenadas” de datos son:</p>
<ul>
<li><p>Una variable se extiende por varias columnas.</p></li>
<li><p>Una observación está dispersa entre múltiples filas</p></li>
</ul>
<p>El paquete <strong>tidyr</strong> de tidyverse resuelve estos problemas y mediante sus funciones <strong>pivot_</strong> nos permite pivotear las tablas a lo “ancho” o “largo”.</p>
<ul>
<li><p>Función <strong>pivot_longer()</strong> - Convierte nombres de columnas en valores de una nueva variable.</p></li>
<li><p>Función <strong>pivot_wider()</strong> - Convierte valores de una variable en columnas nuevas.</p></li>
</ul>
<p>Para pasar de formato ancho a largo, es decir cuando los valores de una variable se extiende por varias columnas, se utilizan como mínimo estos argumentos:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>tabla_ancho <span class="sc">|&gt;</span> </span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>paises,        <span class="co"># todas las columnas -paises</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"anio"</span>,     <span class="co"># nombre de la columna de los nombres</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"casos"</span>)   <span class="co"># nombre la columna de los valores</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/06/tabla_longer.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:50.0%"></p>
</figure>
</div>
<p>El formato inverso, cuando una observación está dispersa entre múltiples filas, sería:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>tabla_largo <span class="sc">|&gt;</span> </span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> tipo,    <span class="co"># nombres de los valores de tipo</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from =</span> casos)  <span class="co"># valores de los valores de casos</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/06/tabla_wider.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:60.0%"></p>
</figure>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("^https:\/\/(www\.)?(linkedin|twitter|github)\.*");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
          // default icon
          link.classList.add("external");
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>